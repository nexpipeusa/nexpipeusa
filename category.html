<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NEXPIPE Â· Catalog</title>
  <style>
    :root{
      --brand:#0b1220;
      --ink:#0b1220;
      --muted:#64748b;
      --accent:#f59e0b;
      --bg:#f8fafc;
      --card:#ffffff;
      --line:#e5e7eb;
      --radius:14px;
      --shadow:0 8px 24px rgba(15,23,42,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;background:var(--bg);color:var(--ink)}
    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}
    .container{max-width:1200px;margin:0 auto;padding:0 16px}

    /* Topbar + Nav */
    .topbar{background:var(--brand);color:#cbd5e1;font-size:14px}
    .topbar .container{display:flex;align-items:center;justify-content:space-between;padding:8px 16px}
    .nav{position:sticky;top:0;background:var(--brand);border-bottom:1px solid #1f2937;z-index:50}
    .nav__row{display:flex;align-items:center;gap:16px;padding:14px 0}
    .brand{font-weight:800;font-size:22px;letter-spacing:.4px;color:#e2e8f0}
    .brand em{font-style:normal;color:var(--accent)}
    .search{flex:1;display:flex}
    .search input{width:100%;padding:10px 12px;border:1px solid #1f2937;border-right:none;border-radius:10px 0 0 10px;outline:0;background:#0f172a;color:#e2e8f0}
    .search input::placeholder{color:#94a3b8}
    .search button{padding:10px 14px;border:1px solid #1f2937;background:#0f172a;color:#e2e8f0;border-radius:0 10px 10px 0;cursor:pointer}
    .menu-btn{display:none;border:1px solid #1f2937;border-radius:10px;background:#0b1220;color:#e2e8f0;padding:8px 10px}
    .nav__links{display:flex;gap:18px;align-items:center}
    .nav__link{font-weight:600;color:#e2e8f0}
    @media (max-width:880px){.nav__links{display:none}.menu-btn{display:inline-block}}

    /* Layout */
    .section{padding:22px 0}
    .wrap{display:grid;grid-template-columns:280px 1fr;gap:16px}
    @media (max-width:980px){.wrap{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
    .card__content{padding:16px}
    .crumb{font-size:14px;color:#334155;margin:10px 0}

    /* Sidebar tree */
    .tree{list-style:none;margin:0;padding:0}
    .tree > li{margin-bottom:10px}
    .node{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border:1px solid var(--line);border-radius:10px;cursor:pointer;font-weight:700}
    .node:hover{background:#f9fafb}
    .children{display:none;margin-top:8px;margin-left:12px}
    .children a{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border:1px dashed var(--line);border-radius:10px;margin-bottom:8px;color:var(--ink)}
    .children a:hover{border-color:var(--accent)}
    .open > .children{display:block}

    /* Right list */
    .vlist{display:flex;flex-direction:column;gap:10px}
    .vitem{display:flex;gap:14px;align-items:center;padding:12px;border:1px solid var(--line);border-radius:12px;background:var(--card);box-shadow:var(--shadow);transition:transform .12s ease}
    .vitem:hover{transform:translateY(-1px)}
    .vthumb{width:96px;flex:0 0 96px}
    .vthumb img{width:100%;height:auto;border-radius:10px}
    .vbody{flex:1;min-width:0}
    .vtitle{margin:0 0 4px;font-size:15px;font-weight:800}
    .vnote{margin:0;color:var(--muted);font-size:13px}
    .vgo{flex:0 0 auto;font-weight:700;display:flex;align-items:center;gap:6px}

    footer{margin-top:26px;background:#0b1220;color:#cbd5e1}
    footer .container{padding:18px 16px}
  </style>
</head>
<body>
  <!-- Header -->
  <div class="topbar">
    <div class="container">
      <div>ğŸ“ 1-213-595-9270</div>
      <!-- <div>ğŸ“¦ Free U.S. shipping $99+ | â±ï¸ Same-day (business days)</div> -->
    </div>
  </div>
  <nav class="nav">
    <div class="container nav__row">
      <button class="menu-btn" id="menuBtn">â˜°</button>
      <a class="brand" href="index.html">NEX<em>PIPE</em></a>
      <div class="search"><input type="search" placeholder="Search the catalogâ€¦"><button>Search</button></div>
      <div class="nav__links" id="navLinks">
        <a class="nav__link" href="index.html#categories">Categories</a>
        <a class="nav__link" href="index.html#featured">Applications</a>
        <a class="nav__link" href="index.html#about">About</a>
        <a class="nav__link" href="index.html#contact">Contact</a>
      </div>
    </div>
  </nav>

  <section class="container section">
    <div class="crumb"><a href="index.html#categories">â† Back to Categories</a></div>
    <div class="wrap">
      <!-- LEFT: category tree -->
      <aside class="card"><div class="card__content">
        <h3 style="margin:0 0 10px">Browse</h3>
        <ul class="tree" id="tree"></ul>
      </div></aside>

      <!-- RIGHT: subcategory/items -->
      <main class="card"><div class="card__content">
        <h1 id="title" style="margin:0 0 8px;font-size:24px"></h1>
        <p id="subtitle" class="muted" style="margin:0 0 14px"></p>
        <div id="list" class="vlist"></div>
      </div></main>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="brand" style="color:#e2e8f0">NEX<em>PIPE</em></div>
      <div style="border-top:1px solid #1f2937;margin-top:10px;padding-top:10px;font-size:14px">Â© 2025 NEXPIPE. For demo only.</div>
    </div>
  </footer>

<script>
  // --- Legacy slug compatibility (optional) ---
  const LEGACY_MAP = {
    'pipe-fittings': 'weld',
    'pipes-accessories': 'threaded'
  };

  function safeSrc(path) {
    // æŒ‰ / åˆ‡å¼€ï¼Œæ¯æ®µåš encodeURIComponentï¼Œå†æ‹¼å›å»
    return String(path)
      .split('/')
      .map(seg => encodeURIComponent(seg))
      .join('/');
  }

  /* ========= Catalog dataset =========
     åªå¯¹ weld å¢åŠ äºŒçº§ itemsï¼›å…¶å®ƒåˆ†ç±»ä¿æŒåŸæ ·
  */
  const CATALOG = {
    /* 1) WELD â€” has 2nd-level items */
    'weld':  {
      title: 'Welded Fittings',
      subtitle: 'Butt-Weld & High-Pressure Socket-Weld Â· Carbon/Stainless Â· Schedules 10/40/80',
      children: [
        /* ========== 1) Butt Weldï¼ˆæš‚æ—¶ç›´æ¥åˆ°å¶å­ï¼‰ ========== */
        {
          key: 'butt',
          name: 'Butt Weld',
          note: 'Elbows Â· Tees Â· Reducers Â· Caps Â· Stub Ends',
          id: 'weld-butt',
          thumb: 'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Š45Â°å¼¯å¤´Sch40sï¼ˆæ»šç ‚ï¼‰.png',
          items: [
            { name:'180Â° Elbow Â· Sch10s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Š180Â°å¼¯å¤´Sch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'180Â° Elbow Â· Sch40s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Š180Â°å¼¯å¤´Sch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'180Â° Elbow Â· Sch80s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Š180Â°å¼¯å¤´Sch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'45Â° Elbow Â· Sch10s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Š45Â°å¼¯å¤´Sch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'45Â° Elbow Â· Sch40s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Š45Â°å¼¯å¤´Sch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'45Â° Elbow Â· Sch80s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Š45Â°å¼¯å¤´Sch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'LR Elbow Â· Sch10s (Sandblasted)',   thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šé•¿åŠå¾„ï¼ˆLRï¼‰å¼¯å¤´Sch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'LR Elbow Â· Sch40s (Sandblasted)',   thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šé•¿åŠå¾„ï¼ˆLRï¼‰å¼¯å¤´Sch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'LR Elbow Â· Sch80s (Sandblasted)',   thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šé•¿åŠå¾„ï¼ˆLRï¼‰å¼¯å¤´Sch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'SR Elbow Â· Sch10s (Sandblasted)',   thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„ŠçŸ­åŠå¾„ï¼ˆSRï¼‰å¼¯å¤´Sch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'SR Elbow Â· Sch40s (Sandblasted)',   thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„ŠçŸ­åŠå¾„ï¼ˆSRï¼‰å¼¯å¤´Sch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'SR Elbow Â· Sch80s (Sandblasted)',   thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„ŠçŸ­åŠå¾„ï¼ˆSRï¼‰å¼¯å¤´Sch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'Equal Tee Â· Sch10s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šä¸‰é€šSch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'Equal Tee Â· Sch40s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šä¸‰é€šSch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'Equal Tee Â· Sch80s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šä¸‰é€šSch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'Reducing Tee Â· Sch10s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šå¼‚å¾„ä¸‰é€šSch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'Reducing Tee Â· Sch40s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šå¼‚å¾„ä¸‰é€šSch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'Reducing Tee Â· Sch80s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šå¼‚å¾„ä¸‰é€šSch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'Concentric Reducer Â· Sch10s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„ŠåŒå¿ƒå¤§å°å¤´Sch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'Concentric Reducer Â· Sch40s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„ŠåŒå¿ƒå¤§å°å¤´Sch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'Concentric Reducer Â· Sch80s (Sandblasted)', thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„ŠåŒå¿ƒå¤§å°å¤´Sch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'Eccentric Reducer Â· Sch10s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šåå¿ƒå¤§å°å¤´Sch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'Eccentric Reducer Â· Sch40s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šåå¿ƒå¤§å°å¤´Sch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'Eccentric Reducer Â· Sch80s (Sandblasted)',  thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šåå¿ƒå¤§å°å¤´Sch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'End Cap Â· Sch10s (Sandblasted)',     thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šç®¡å¸½Sch10sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'End Cap Â· Sch40s (Sandblasted)',     thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šç®¡å¸½Sch40sï¼ˆæ»šç ‚ï¼‰.png' },
            { name:'End Cap Â· Sch80s (Sandblasted)',     thumb:'sub_category/Welded Fittings/Butt Weld/å¯¹ç„Šç®¡å¸½Sch80sï¼ˆæ»šç ‚ï¼‰.png' },

            { name:'Stub End Â· Sch10s (Machined)',       thumb:'sub_category/Welded Fittings/Butt Weld/ç¿»è¾¹çŸ­èŠ‚Sch10sï¼ˆç²¾è½¦ï¼‰.png' },
            { name:'Stub End Â· Sch40s (Machined)',       thumb:'sub_category/Welded Fittings/Butt Weld/ç¿»è¾¹çŸ­èŠ‚Sch40sï¼ˆç²¾è½¦ï¼‰.png' },
            { name:'Stub End Â· Sch80s (Machined)',       thumb:'sub_category/Welded Fittings/Butt Weld/ç¿»è¾¹çŸ­èŠ‚Sch80sï¼ˆç²¾è½¦ï¼‰.png' }
          ]
        },

        /* ========== 2) Socket Weldï¼ˆä¸‰çº§ï¼šæŒ‰æè´¨åˆ†ç»„ï¼‰ ========== */
        {
          key: 'socket',
          name: 'Socket Weld',
          note: 'High-Pressure Â· Carbon Steel (A105) Â· Stainless (304/316)',
          id: 'weld-socket',
          thumb: 'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„Šä¸‰é€š.png',
          subchildren: [
            /* 2-1) CS A105 */
            {
              key: 'sw-cs-a105',
              name: 'Carbon Steel (A105)',
              note: 'SW Tee/Elbow/Coupling/Cap/Union Â· Ref Photos',
              thumb: 'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„Šå¼¯å¤´.png',
              items: [
                { name:'SW Tee (CS Â· A105)',            thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„Šä¸‰é€š.png' },
                { name:'SW Elbow (CS Â· A105)',          thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„Šå¼¯å¤´.png' },
                { name:'SW Half Coupling (CS Â· A105)',  thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„ŠåŠç®¡ç®.png' },
                { name:'SW Double-Socket Coupling (CS)',thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„ŠåŒæ‰¿å£ç®¡ç®.png' },
                { name:'SW Cap (CS Â· A105)',            thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„Šç®¡å¸½.png' },
                { name:'SW Cross (CS Â· A105)',          thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„Šå››é€š.png' },
                { name:'Union (CS Â· SW A105)',          thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/é«˜å‹ç¢³é’¢æ‰¿æ’ç„Šæ´»æ¥å¤´.png' },
                { name:'Reference Photo A (CS SW)',     thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/6K2A0403.jpg' },
                { name:'Reference Photo B (CS SW)',     thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/6K2A0404.jpg' },
                { name:'Reference Photo C (CS SW)',     thumb:'sub_category/Welded Fittings/Socket Weld/Carbon Steel (A105)/6K2A0405.jpg' }
              ]
            },

            /* 2-2) SS 304/316 */
            {
              key: 'sw-ss-304316',
              name: 'Stainless Steel (304/316)',
              note: 'SW/Threaded Â· O-Let/Union/Coupling/Reducer/45Â°',
              thumb: 'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šå¼¯å¤´.png',
              items: [
                { name:'Branch Outlet (BW Â· SS)',                  thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/ä¸é”ˆé’¢å¯¹ç„Šæ”¯ç®¡å°.png' },
                { name:'Branch Outlet (SW Â· SS)',                  thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/ä¸é”ˆé’¢æ‰¿æ’ç„Šæ”¯ç®¡å°.png' },
                { name:'Union (BW Â· SS Â· High-Pressure)',          thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢å¯¹ç„Šæ´»æ¥å¤´.png' },

                { name:'SW Tee (SS Â· HP)',                         thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šä¸‰é€š.png' },
                { name:'SW Cross (SS Â· HP)',                       thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šå››é€š.png' },
                { name:'SW Elbow (SS Â· HP)',                       thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šå¼¯å¤´.png' },
                { name:'SW 45Â° Elbow (SS Â· HP)',                   thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Š45Â°å¼¯å¤´.png' },
                { name:'SW Cap (SS Â· HP)',                         thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šç®¡å¸½.png' },
                { name:'SW Coupling (SS Â· HP)',                    thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šç®¡ç®.png' },
                { name:'SW Half Coupling (SS Â· HP)',               thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„ŠåŠç®¡ç®.png' },

                { name:'Reducer (SS Â· High-Pressure)',             thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢ç¼©å‡ç®¡.png' },

                { name:'Reducing Tee 1/4â€“1â€³ (SS Â· SW)',            thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šå˜å¾„ä¸‰é€š1ã€4-1â€œ.png' },
                { name:'Reducing Tee 1/4â€“2â€³ (SS Â· SW)',            thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šå˜å¾„ä¸‰é€š11ã€4-2â€.png' },
                { name:'Reducing Coupling 1/4â€“1â€³ (SS Â· SW)',       thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šå˜å¾„ç®¡ç®1ã€4-1â€œ.png' },
                { name:'Reducing Coupling 1/4â€“2â€³ (SS Â· SW)',       thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’1ç„Šå˜å¾„ç®¡ç®11ã€4-2â€.png' },

                { name:'45Â° Elbow Â· Threaded (SS Â· BSPT)',         thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢èºçº¹45Â°å¼¯å¤´ï¼ˆBSPTï¼‰.png' },
                { name:'45Â° Elbow Â· Threaded (SS Â· NPT)',          thumb:'sub_category/Welded Fittings/Socket Weld/Stainless Steel (304:316)/é«˜å‹ä¸é”ˆé’¢èºçº¹45Â°å¼¯å¤´ï¼ˆNPTï¼‰.png' }
              ]
            }
          ]
        }
      ]
    },

    'threaded': {
        title: 'Threaded Fittings',
        subtitle: 'BSPT/NPT Â· Low-Pressure (150#) & Forged Threaded (3000#/6000#) Â· Carbon/Stainless',
        children: [
          /* ========== 1) 150# ä½å‹ï¼šç›´æ¥åˆ°å¶å­ ========== */
          {
            key: 'low',
            name: 'Threaded Fittings 150#',
            note: 'Low-Pressure Threaded Â· BSPT / NPT',
            id: 'threaded-low',
            thumb: 'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…ä¸ç®¡ç®ï¼ˆBSPTï¼‰.png',
            items: [
              { name:'Plain Female Coupling',                    thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å…‰é¢å†…ä¸ç›´é€š.png' },
              { name:'45Â° Elbow (NPT)',                          thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹45Â°å¼¯å¤´ï¼ˆNPTï¼‰.png' },
              { name:'Female-to-Weld Union (BSPT)',              thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/å†…ä¸è½¬ç„Šæ¥æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Plain Weld Hose Connector',                thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å…‰é¢ç„Šæ¥çš®ç®¡æ¥å¤´.png' },
              { name:'Plain Hose Connector (BSPT)',              thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å…‰é¢çš®ç®¡æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Male-to-Female Elbow Union (BSPT)',        thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/å¤–ä¸è½¬å†…ä¸å¼¯å¤´æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Male-to-Weld Union (BSPT)',                thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/å¤–ä¸è½¬ç„Šæ¥æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Weld-to-Female Elbow Union (BSPT)',        thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ç„Šæ¥è½¬å†…ä¸å¼¯å¤´æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Plain Hose Connector (NPT)',               thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å…‰é¢çš®ç®¡æ¥å¤´ï¼ˆNPTï¼‰.png' },

              { name:'Female-Male-Female Tee',                   thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…å¤–å†…ç‰™ä¸‰é€š.png' },
              { name:'Male-Female-Male Tee',                     thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å¤–å†…å¤–ç‰™ä¸‰é€š.png' },
              { name:'Male-Male-Female Tee',                     thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å¤–å¤–å†…ä¸ä¸‰é€š.png' },

              { name:'Male-Female Adapter',                      thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/å†…å¤–èºçº¹è½¬æ¥å¤´.png' },
              { name:'Heavy-Duty SS Water Tank Fitting',         thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/åŠ åšä¸é”ˆé’¢æ°´ç®±æ¥å¤´.png' },
              { name:'Faucet Bent-Leg Connector',                thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/é¾™å¤´æ›²è„šæ¥å¤´.png' },

              { name:'Male Elbow (BSPT)',                        thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å¤–ä¸å¼¯å¤´(BSPT).png' },
              { name:'Male-Female Elbow (BSPT)',                 thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…å¤–ä¸å¼¯å¤´ï¼ˆBSPTï¼‰.png' },

              { name:'Double-Ended Nipple 100mm (BSPT Â· 16KG)',  thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/16KGå…‰é¢åŒå¤´ç®¡å¤–ä¸100MMï¼ˆBSPTï¼‰.png' },
              { name:'Double-Ended Nipple 100mm (NPT Â· 16KG)',   thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/16KGå…‰é¢åŒå¤´ç®¡å¤–ä¸100MMï¼ˆNPTï¼‰.png' },
              { name:'Single-Ended Nipple (BSPT Â· 16KG)',        thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/16KGå…‰é¢å•å¤´ç®¡å¤–ä¸ï¼ˆBSPTï¼‰.png' },
              { name:'Single-Ended Nipple (NPT Â· 16KG)',         thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/16KGå…‰é¢å•å¤´ç®¡å¤–ä¸ï¼ˆNPTï¼‰.png' },

              { name:'Butt-Weld Union (25KG)',                   thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å¯¹ç„Šæ´»æ¥å¤´ï¼ˆ25KGï¼‰.png' },

              { name:'Hex Socket Plug (304)',                    thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/304å†…å…­è§’å µå¤´.png' },
              { name:'Hex Socket Flanged Plug (304)',            thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/304å†…å…­è§’å¸¦è¾¹å µå¤´.png' },
              { name:'Hex Head Flanged Plug (304)',              thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/304å¤–å…­è§’å¸¦è¾¹å µå¤´.png' },

              { name:'Hex Nipple (BSPT)',                        thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å…­è§’å¯¹ä¸ï¼ˆBSPTï¼‰.png' },
              { name:'Hex Hose Connector (BSPT)',                thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å…­è§’çš®ç®¡æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Female Cross (BSPT)',                      thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…ä¸å››é€šï¼ˆBSPTï¼‰.png' },
              { name:'Female Cap (BSPT)',                        thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…ä¸ç®¡å¸½ï¼ˆBSPTï¼‰.png' },
              { name:'Female Coupling (BSPT)',                   thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…ä¸ç®¡ç®ï¼ˆBSPTï¼‰.png' },
              { name:'Male-Female Elbow (BSPT)',                 thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…ä¸å¼¯å¤´æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Male-Female Union (BSPT)',                 thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…å¤–ä¸æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Male-Female Coupling (BSPT)',              thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…å¤–ä¸ç®¡ç®ï¼ˆBSPTï¼‰.png' },
              { name:'Double-Male Union (BSPT)',                 thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹åŒå¤´å¤–ä¸æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Reducing Hex Nipple (BSPT)',               thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å˜å¾„å…­è§’å¯¹ä¸ï¼ˆBSPTï¼‰.png' },
              { name:'Reducing Female Socket (BSPT)',            thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å˜å¾„å†…ä¸ï¼ˆBSPTï¼‰.png' },
              { name:'Gasket Union (BSPT)',                      thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å«ç‰‡æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
              { name:'Male Tee (BSPT)',                          thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å¤–ä¸ä¸‰é€šï¼ˆBSPTï¼‰.png' },
              { name:'Bushing (BSPT)',                           thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹è¡¥å¿ƒï¼ˆBSPTï¼‰.png' },

              { name:'Hex Nipple (NPT)',                         thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å…­è§’å¯¹ä¸ï¼ˆNPTï¼‰.png' },
              { name:'Hex Hose Connector (NPT)',                 thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å…­è§’çš®ç®¡æ¥å¤´ï¼ˆNPTï¼‰.png' },
              { name:'Female Cross (NPT)',                       thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…ä¸å››é€šï¼ˆNPTï¼‰.png' },
              { name:'Female Cap (NPT)',                         thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…ä¸ç®¡å¸½ï¼ˆNPTï¼‰.png' },
              { name:'Female Coupling (NPT)',                    thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…ä¸ç®¡ç®ï¼ˆNPTï¼‰.png' },
              { name:'Male-Female Elbow (NPT)',                  thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…å¤–ä¸å¼¯å¤´ï¼ˆNPTï¼‰.png' },
              { name:'Male-Female Union (NPT)',                  thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å†…å¤–ä¸æ´»æ¥å¤´ï¼ˆNPTï¼‰.png' },
              { name:'Reducing Hex Nipple (NPT)',                thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å˜å¾„å…­è§’å¯¹ä¸ï¼ˆNPTï¼‰.png' },
              { name:'Reducing Female Socket (NPT)',             thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å˜å¾„å†…ä¸ï¼ˆNPTï¼‰.png' },
              { name:'Gasket Union (NPT)',                       thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹å«ç‰‡æ´»æ¥å¤´ï¼ˆNPTï¼‰.png' },
              { name:'Bushing (NPT)',                            thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/ä½å‹è¡¥å¿ƒï¼ˆNPTï¼‰.png' },

              { name:'Spiral Nozzle SPJT',                       thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/èºæ—‹å–·å¤´SPJT.png' },
              { name:'Spiral Nozzle SPJT (Sand Finish)',         thumb:'sub_category/Threaded Fittings/Threaded Fittings 150#/èºæ—‹å–·å¤´SPJTï¼ˆç ‚é¢ï¼‰.png' }
            ]
          },

          /* ========== 2) 3000#/6000#ï¼šè¿›å…¥ç¬¬ä¸‰çº§ï¼ˆCS / SSï¼‰ ========== */
          {
            key: 'forged',
            name: 'Forged Threaded 3000#/6000#',
            note: 'High-Pressure Â· Carbon Steel (A105) & Stainless (304/316)',
            id: 'threaded-forged',
            thumb: 'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢èºçº¹ä¸‰é€šï¼ˆBSPT-NPTï¼‰.png',
            subchildren: [
              /* 2-1) ç¢³é’¢ A105 */
              {
                key: 'ft-cs-a105',
                name: 'Carbon Steel (A105)',
                note: '3000#/6000# Â· BSPT/NPT',
                thumb: 'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢èºçº¹å¼¯å¤´ï¼ˆBSPT-NPTï¼‰.png',
                items: [
                  { name:'Hex Flange Plug (CS)',                        thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/ç¢³é’¢å¤–å…­è§’æ³•å…°é¢å µå¤´.png' },
                  { name:'Hex Socket Plug (Forged CS)',                 thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/ç¢³é’¢é”»é€ å†…å…­è§’å µå¤´.png' },
                  { name:'Half Coupling (BSPT/NPT Â· CS)',               thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢åŠèºçº¹ç®¡ç®(BSPTNPT).png' },
                  { name:'Square Plug (BSPT/NPT Â· CS)',                 thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢å››æ–¹å µ(BSPTã€NPT).png' },
                  { name:'Male Nipple Â· Single End (BSPT/NPT Â· CS)',    thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/ç¢³é’¢å•å¤´èºçº¹ç®¡å¤–ä¸ï¼ˆBSPT-NPTï¼‰.png' },
                  { name:'Male Nipple Â· Double End (BSPT/NPT Â· CS)',    thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/ç¢³é’¢åŒå¤´èºçº¹ç®¡å¤–ä¸ï¼ˆBSPT-NPTï¼‰.png' },
                  { name:'Hex Nipple (BSPT/NPT Â· CS)',                  thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢èºçº¹å…­è§’å¤–ä¸ï¼ˆBSPT-NPTï¼‰.png' },
                  { name:'Elbow (BSPT/NPT Â· CS)',                       thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢èºçº¹å¼¯å¤´ï¼ˆBSPT-NPTï¼‰.png' },
                  { name:'Tee (BSPT/NPT Â· CS)',                         thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢èºçº¹ä¸‰é€šï¼ˆBSPT-NPTï¼‰.png' },
                  { name:'Union (BSPT/NPT Â· CS)',                       thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢èºçº¹æ´»æ¥å¤´ï¼ˆBSPT-NPTï¼‰.png' },
                  { name:'Cap (BSPT/NPT Â· CS)',                         thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢èºçº¹ç®¡å¸½ï¼ˆBSPT-NPTï¼‰.png' },
                  { name:'Coupling (BSPT/NPT Â· CS)',                    thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢èºçº¹ç®¡ç®ï¼ˆBSPT-NPTï¼‰.png' },
                  { name:'Bushing (BSPT Â· CS)',                         thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢è¡¥å¿ƒï¼ˆBSPTï¼‰.png' },
                  { name:'Bushing (NPT Â· CS)',                          thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/é«˜å‹ç¢³é’¢è¡¥å¿ƒï¼ˆNPTï¼‰.png' },
                  { name:'Hex Plug (BSPT/NPT Â· CS)',                    thumb:'sub_category/Threaded Fittings/CS Forged Threaded 3000#:6000#/ç¢³é’¢å¤–å…­è§’å µå¤´ï¼ˆBSPTã€NPTï¼‰.png' }
                ]
              },
              /* 2-2) ä¸é”ˆé’¢ 304/316 */
              {
                key: 'ft-ss-304316',
                name: 'Stainless Steel (304/316)',
                note: '3000#/6000# Â· BSPT/NPT',
                thumb: 'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å†…ä¸ä¸‰é€šï¼ˆBSPTï¼‰.png',
                items: [
                  { name:'Hex Nipple (BSPT Â· SS)',                   thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å…­è§’å¯¹ä¸(BSPT).png' },
                  { name:'Hex Nipple (NPT Â· SS)',                    thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å…­è§’å¯¹ä¸(NPT).png' },

                  { name:'Double-Ended Male 50mm (BSPT Â· SS)',       thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹åŒå¤´å¤–ä¸50MM(BSPT).png' },
                  { name:'Double-Ended Male 75mm (BSPT Â· SS)',       thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹åŒå¤´å¤–ä¸75MM(BSPT).png' },
                  { name:'Double-Ended Male 100mm (BSPT Â· SS)',      thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹åŒå¤´å¤–ä¸100MM(BSPT).png' },
                  { name:'Double-Ended Male 150mm (BSPT Â· SS)',      thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹åŒå¤´å¤–ä¸150MM(BSPT).png' },
                  { name:'Double-Ended Male 200mm (BSPT Â· SS)',      thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹åŒå¤´å¤–ä¸200MM(BSPT).png' },

                  { name:'Single-Ended Male 50mm (BSPT Â· SS)',       thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹å•å¤´å¤–ä¸50MM(BSPT).png' },
                  { name:'Single-Ended Male 75mm (BSPT Â· SS)',       thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹å•å¤´å¤–ä¸75MM(BSPT).png' },
                  { name:'Single-Ended Male 100mm (BSPT Â· SS)',      thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹å•å¤´å¤–ä¸100MMï¼ˆBSPTï¼‰.png' },
                  { name:'Single-Ended Male 150mm (BSPT Â· SS)',      thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹å•å¤´å¤–ä¸150MM(BSPT).png' },
                  { name:'Single-Ended Male 200mm (BSPT Â· SS)',      thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹å•å¤´å¤–ä¸200MM(BSPT).png' },

                  { name:'Hex Nipple (BSPT Â· SS) â€” alt',             thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å…­è§’å¯¹ä¸ï¼ˆBSPTï¼‰.png' },
                  { name:'Hex Nipple (NPT Â· SS) â€” alt',              thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å…­è§’å¯¹ä¸ï¼ˆNPTï¼‰.png' },

                  { name:'Female Tee (BSPT Â· SS)',                   thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å†…ä¸ä¸‰é€šï¼ˆBSPTï¼‰.png' },
                  { name:'Female Tee (NPT Â· SS)',                    thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å†…ä¸ä¸‰é€šï¼ˆNPTï¼‰.png' },
                  { name:'Female Elbow (BSPT Â· SS)',                 thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å†…ä¸å¼¯å¤´ï¼ˆBSPTï¼‰.png' },
                  { name:'Female Elbow (NPT Â· SS)',                  thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å†…ä¸å¼¯å¤´ï¼ˆNPTï¼‰.png' },

                  { name:'Square Plug (BSPT Â· SS)',                  thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å››æ–¹å µå¤´ï¼ˆBSPTï¼‰.png' },
                  { name:'Square Plug (NPT Â· SS)',                   thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å››æ–¹å µå¤´ï¼ˆNPTï¼‰.png' },
                  { name:'Hex Socket Plug (BSPT Â· SS)',              thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å…­è§’å µå¤´ï¼ˆBSPTï¼‰.png' },
                  { name:'Hex Socket Plug (NPT Â· SS)',               thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å…­è§’å µå¤´ï¼ˆNPTï¼‰.png' },

                  { name:'Gasket Union (BSPT Â· SS)',                 thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢å«ç‰‡æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
                  { name:'Half Coupling (BSPT Â· SS)',                thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢èºçº¹åŠç®¡ç®ï¼ˆBSPTï¼‰.png' },
                  { name:'Half Coupling (NPT Â· SS)',                 thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢èºçº¹åŠç®¡ç®ï¼ˆNPTï¼‰.png' },

                  { name:'Female Cross (BSPT Â· SS)',                 thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢èºçº¹å››é€šï¼ˆBSPTï¼‰.png' },
                  { name:'Female Cross (NPT Â· SS)',                  thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢èºçº¹å››é€šï¼ˆNPTï¼‰.png' },
                  { name:'Female Cap (BSPT Â· SS)',                   thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢èºçº¹ç®¡å¸½ï¼ˆBSPTï¼‰.png' },
                  { name:'Female Cap (NPT Â· SS)',                    thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢èºçº¹ç®¡å¸½ï¼ˆNPTï¼‰.png' },
                  { name:'Female Coupling (BSPT Â· SS)',              thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢èºçº¹ç®¡ç®ï¼ˆBSPTï¼‰.png' },
                  { name:'Female Coupling (NPT Â· SS)',               thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢èºçº¹ç®¡ç®ï¼ˆNPTï¼‰.png' },

                  { name:'Bushing (BSPT Â· SS)',                      thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢è¡¥å¿ƒï¼ˆBSPTï¼‰.png' },
                  { name:'Bushing (NPT Â· SS)',                       thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹ä¸é”ˆé’¢è¡¥å¿ƒï¼ˆNPTï¼‰.png' },

                  { name:'BSPT Elbow (Male-Female Â· HP)',            thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹å†…å¤–ä¸å¼¯å¤´BSPT.png' },
                  { name:'Ball-Surface Union (BSPT Â· HP)',           thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹çƒé¢æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },
                  { name:'Ball-Surface MF Union (BSPT Â· HP)',        thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/é«˜å‹çƒé¢å†…å¤–ä¸æ´»æ¥å¤´ï¼ˆBSPTï¼‰.png' },

                  { name:'Thick-Wall Straight (BSP-Rp)',             thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/åŠ åšé€šä¸ï¼ˆBSP-Rpï¼‰.png' },
                  { name:'Thick-Wall Half Straight (BSP-Rp)',        thumb:'sub_category/Threaded Fittings/Forged Threaded 3000#:6000#/åŠ åšåŠé€šä¸ï¼ˆBSP-Rpï¼‰.png' }
                ]
              }
            ]
          }
        ]
      },


    /* 3) FLANGES â€” unchanged */
    'flanges': {
      title: 'Flanges',
      subtitle: 'Slip-On Â· Weld Neck Â· Blind Â· Threaded Â· Plate Â· Gaskets',
      children: [
        { name:'Stainless Branch Outlet (Flanged)', id:'flg-branch-outlet', thumb:'sub_category/flanges/ä¸é”ˆé’¢æ³•å…°æ”¯ç®¡å°.png' },
        { name:'PTFE Flange Gasket',               id:'flg-ptfe-gasket',    thumb:'sub_category/flanges/æ³•å…°å››æ°Ÿå«ç‰‡.png' },
        { name:'Plate Slip-On Flange PN6',         id:'flg-so-pn6',         thumb:'sub_category/flanges/æœºæ¢°éƒ¨æ¿å¼å¹³ç„Šæ³•å…°PN6.png' },
        { name:'Plate Slip-On Flange PN10',        id:'flg-so-pn10',        thumb:'sub_category/flanges/æœºæ¢°éƒ¨æ¿å¼å¹³ç„Šæ³•å…°PN10.png' },
        { name:'Plate Slip-On Flange PN16',        id:'flg-so-pn16',        thumb:'sub_category/flanges/æœºæ¢°éƒ¨æ¿å¼å¹³ç„Šæ³•å…°PN16.png' },
        { name:'Plate Slip-On Flange PN25',        id:'flg-so-pn25',        thumb:'sub_category/flanges/æœºæ¢°éƒ¨æ¿å¼å¹³ç„Šæ³•å…°PN25.png' }
      ]
    },

    /* 4) VALVES â€” unchanged */
    'valves': {
      title: 'Valves',
      subtitle: 'Cast / Forged Â· Threaded / Socket-Weld / Flanged Â· Stainless & Carbon',
      children: [
        /* ====================== 1) çƒé˜€ï¼ˆBall Valvesï¼‰â†’ ç¬¬ä¸‰çº§ï¼š1P / 2P / 3P ====================== */
        {
          key: 'ball',
          name: 'Ball Valves (Cast)',
          note: '1-Piece / 2-Piece / 3-Piece Â· Wafer & Welded',
          id: 'val-ball',
          thumb: 'sub_category/Valves/çƒé˜€/1P/é“¸é€ ä¸€ç‰‡å¼çƒé˜€ï¼ˆè½»å‹ï¼‰.png',
          subchildren: [
            {
              key: 'ball-1p',
              name: '1-Piece',
              note: 'Wafer / Light / Heavy',
              thumb: 'sub_category/Valves/çƒé˜€/1P/é“¸é€ ä¸€ç‰‡å¼çƒé˜€ï¼ˆé‡å‹ï¼‰.png',
              items: [
                { name:'Wafer One-Piece Ball Valve',  thumb:'sub_category/Valves/çƒé˜€/1P/è¶å½¢ä¸€ç‰‡å¼çƒé˜€.png' },
                { name:'Cast 1-Piece Ball Valve (Light)',  thumb:'sub_category/Valves/çƒé˜€/1P/é“¸é€ ä¸€ç‰‡å¼çƒé˜€ï¼ˆè½»å‹ï¼‰.png' },
                { name:'Cast 1-Piece Ball Valve (Heavy)',  thumb:'sub_category/Valves/çƒé˜€/1P/é“¸é€ ä¸€ç‰‡å¼çƒé˜€ï¼ˆé‡å‹ï¼‰.png' }
              ]
            },
            {
              key: 'ball-2p',
              name: '2-Piece',
              note: 'Light / Medium / Heavy',
              thumb: 'sub_category/Valves/çƒé˜€/2P/é“¸é€ äºŒç‰‡å¼çƒé˜€ï¼ˆä¸­å‹ï¼‰.png',
              items: [
                { name:'Cast 2-Piece Ball Valve (Light)',   thumb:'sub_category/Valves/çƒé˜€/2P/é“¸é€ äºŒç‰‡å¼çƒé˜€ï¼ˆè½»å‹ï¼‰.png' },
                { name:'Cast 2-Piece Ball Valve (Medium)',  thumb:'sub_category/Valves/çƒé˜€/2P/é“¸é€ äºŒç‰‡å¼çƒé˜€ï¼ˆä¸­å‹ï¼‰.png' },
                { name:'Cast 2-Piece Ball Valve (Heavy)',   thumb:'sub_category/Valves/çƒé˜€/2P/é“¸é€ äºŒç‰‡å¼çƒé˜€ï¼ˆé‡å‹ï¼‰.png' }
              ]
            },
            {
              key: 'ball-3p',
              name: '3-Piece',
              note: 'Light / Medium / Heavy Â· Welded',
              thumb: 'sub_category/Valves/çƒé˜€/3P/é“¸é€ ä¸‰ç‰‡å¼çƒé˜€ï¼ˆä¸­å‹ï¼‰.png',
              items: [
                { name:'Cast 3-Piece Ball Valve (Light)',   thumb:'sub_category/Valves/çƒé˜€/3P/é“¸é€ ä¸‰ç‰‡å¼çƒé˜€ï¼ˆè½»å‹ï¼‰.png' },
                { name:'Cast 3-Piece Ball Valve (Medium)',  thumb:'sub_category/Valves/çƒé˜€/3P/é“¸é€ ä¸‰ç‰‡å¼çƒé˜€ï¼ˆä¸­å‹ï¼‰.png' },
                { name:'Cast 3-Piece Ball Valve (Heavy)',   thumb:'sub_category/Valves/çƒé˜€/3P/é“¸é€ ä¸‰ç‰‡å¼çƒé˜€ï¼ˆé‡å‹ï¼‰.png' },
                { name:'3-Piece Welded Ball Valve (Light)', thumb:'sub_category/Valves/çƒé˜€/3P/é“¸é€ ä¸‰ç‰‡å¼ç„Šæ¥çƒé˜€ï¼ˆè½»å‹ï¼‰.png' },
                { name:'3-Piece Welded Ball Valve (Heavy)', thumb:'sub_category/Valves/çƒé˜€/3P/é“¸é€ ä¸‰ç‰‡å¼ç„Šæ¥çƒé˜€ï¼ˆé‡å‹ï¼‰.png' }
              ]
            }
          ]
        },

        /* ====================== 2) é”»é’¢é˜€é—¨ï¼ˆForged Steelï¼‰====================== */
        {
          key: 'forged-steel',
          name: 'Forged Steel Valves',
          note: 'Threaded / Socket-Weld / Flanged Â· CS/Alloy',
          id: 'val-forged-steel',
          thumb: 'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢æ‰¿æ’ç„Šé—¸é˜€.png',
          items: [
            /* Threaded */
            { name:'Gate Valve (Forged Â· Threaded)',  thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢èºçº¹é—¸é˜€.png' },
            { name:'Globe Valve (Forged Â· Threaded)', thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢èºçº¹æˆªæ­¢é˜€.png' },

            /* Socket-Weld */
            { name:'Gate Valve (Forged Â· SW)',        thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢æ‰¿æ’ç„Šé—¸é˜€.png' },
            { name:'Globe Valve (Forged Â· SW)',       thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢æ‰¿æ’ç„Šæˆªæ­¢é˜€.png' },
            { name:'Check Valve (Forged Â· SW)',       thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/æ‰¿æ’ç„Šé”»é’¢æ­¢å›é˜€.png' },

            /* Flanged */
            { name:'Gate Valve (Forged Â· Flanged)',   thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢æ³•å…°é—¸é˜€.png' },
            { name:'Globe Valve (Forged Â· Flanged)',  thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢æ³•å…°æˆªæ­¢é˜€.png' },
            { name:'Check Valve (Forged Â· Flanged)',  thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢æ³•å…°æ­¢å›é˜€.png' },
            { name:'2-Piece Ball Valve (Forged Â· Flanged)', thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢æ³•å…°äºŒç‰‡å¼çƒé˜€.png' },
            { name:'Strainer (Forged Â· Flanged)',     thumb:'sub_category/Valves/é”»é’¢é˜€é—¨/é”»é’¢æ³•å…°è¿‡æ»¤å™¨.png' }
          ]
        },

        /* ====================== 3) é«˜å‹é”»é€ é˜€ï¼ˆä¸é”ˆé’¢Â·é«˜å‹ï¼‰====================== */
        {
          key: 'hp-stainless',
          name: 'High-Pressure Stainless (Forged)',
          note: 'Threaded / Socket-Weld / Flanged Â· 304/316',
          id: 'val-hp-stainless',
          thumb: 'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢èºçº¹é—¸é˜€.png',
          items: [
            /* Threaded */
            { name:'Gate Valve (HP SS Â· Threaded)',   thumb:'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢èºçº¹é—¸é˜€.png' },
            { name:'Globe Valve (HP SS Â· Threaded)',  thumb:'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢èºçº¹æˆªæ­¢é˜€.png' },
            { name:'Check Valve (HP SS Â· Threaded)',  thumb:'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢èºçº¹æ­¢å›é˜€.png' },
            { name:'Strainer (HP SS Â· Threaded)',     thumb:'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢èºçº¹è¿‡æ»¤å™¨.png' },

            /* Socket-Weld */
            { name:'Gate Valve (HP SS Â· SW)',         thumb:'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šé—¸é˜€.png' },
            { name:'Globe Valve (HP SS Â· SW)',        thumb:'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢æ‰¿æ’ç„Šæˆªæ­¢é˜€.png' },

            /* Flanged */
            { name:'Gate Valve (HP SS Â· Flanged)',    thumb:'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢æ³•å…°é—¸é˜€.png' },
            { name:'Globe Valve (HP SS Â· Flanged)',   thumb:'sub_category/Valves/é«˜å‹é”»é€ é˜€/é«˜å‹ä¸é”ˆé’¢æ³•å…°æˆªæ­¢é˜€.png' }
          ]
        },

        /* ====================== 4) é“¸é€ ä¸é”ˆé’¢é˜€ & è¿‡æ»¤å™¨ï¼ˆå•å›¾ï¼‰====================== */
        {
          key: 'cast-ss-singletons',
          name: 'Cast Stainless (Singles)',
          note: 'Gate Â· Vertical/Horizontal Check Â· Y-Strainer',
          id: 'val-cast-ss-solo',
          thumb: 'sub_category/Valves/é“¸é€ ä¸é”ˆé’¢é—¸é˜€.png',
          items: [
            { name:'Gate Valve (Cast Stainless)',               thumb:'sub_category/Valves/é“¸é€ ä¸é”ˆé’¢é—¸é˜€.png' },
            { name:'Vertical Check Valve (Cast Stainless)',     thumb:'sub_category/Valves/é“¸é€ ä¸é”ˆé’¢ç«‹å¼æ­¢å›é˜€.png' },
            { name:'Horizontal Check Valve (Low-Pressure SS)',  thumb:'sub_category/Valves/ä½å‹ä¸é”ˆé’¢å§å¼æ­¢å›é˜€.png' },
            { name:'Y-Strainer (Cast Stainless)',               thumb:'sub_category/Valves/é“¸é€ ä¸é”ˆé’¢Yå‹è¿‡æ»¤å™¨.png' }
          ]
        }
      ]
    }
  };

const keys = ['weld','threaded','flanges','valves'];

  // --- URL & legacy mapping ---
  const params = new URLSearchParams(location.search);

  let rawType = params.get('type');
  if (rawType && LEGACY_MAP[rawType]) {
    const newType = LEGACY_MAP[rawType];
    params.set('type', newType);
    const newUrl = `${location.pathname}?${params.toString()}`;
    history.replaceState({type:newType}, '', newUrl);
  }

  const currentTypeInit  = params.get('type')  || 'weld';
  const currentChildInit = params.get('child') || null;
  const currentGrandInit = params.get('grand') || null; // âœ… ç¬¬ä¸‰çº§

  const titleEl = document.getElementById('title');
  const subtitleEl = document.getElementById('subtitle');
  const listEl = document.getElementById('list');
  const treeEl = document.getElementById('tree');

  let currentType  = currentTypeInit;
  let currentChild = currentChildInit;
  let currentGrand = currentGrandInit; // âœ…

// å·¥å…·ï¼šå–å­é¡¹ä¸æ˜¯å¦å­˜åœ¨ items / subchildren / grandchild
  function getChild(typeKey, childKey){
    const data = CATALOG[typeKey];
    if (!data) return null;
    return (data.children||[]).find(c => (c.key||c.id||c.name) === childKey) || null;
  }
  function childHasItems(typeKey, childKey){
    const c = getChild(typeKey, childKey);
    return !!(c && Array.isArray(c.items) && c.items.length);
  }
  function childHasSubchildren(typeKey, childKey){
    const c = getChild(typeKey, childKey);
    return !!(c && Array.isArray(c.subchildren) && c.subchildren.length);
  }
  function getGrandchild(typeKey, childKey, grandKey){
    const c = getChild(typeKey, childKey);
    if (!c || !Array.isArray(c.subchildren)) return null;
    return c.subchildren.find(sc => (sc.key||sc.id||sc.name) === grandKey) || null;
  }
  function grandchildHasItems(typeKey, childKey, grandKey){
    const g = getGrandchild(typeKey, childKey, grandKey);
    return !!(g && Array.isArray(g.items) && g.items.length);
  }

  // ========== RIGHT PANE RENDER (æ”¯æŒåˆ°ç¬¬ä¸‰çº§) ==========
  function renderRight(typeKey, childKey=null, grandKey=null){
    const data = CATALOG[typeKey];
    if (!data) return;

    // â‘¢ ä¸‰çº§ï¼šchild + grand + items[]
    if (childKey && grandKey && grandchildHasItems(typeKey, childKey, grandKey)) {
      const child = getChild(typeKey, childKey);
      const grand = getGrandchild(typeKey, childKey, grandKey);

      titleEl.textContent    = grand.name;
      subtitleEl.textContent = grand.note || child?.note || data.subtitle || '';
      listEl.innerHTML = '';

      document.querySelector('.crumb').innerHTML =
        `<a href="index.html#categories">â† Back to Categories</a> Â· 
         <a href="?type=${encodeURIComponent(typeKey)}">${data.title}</a> Â· 
         <a href="?type=${encodeURIComponent(typeKey)}&child=${encodeURIComponent(childKey)}">${child.name}</a> Â· 
         <span>${grand.name}</span>`;

      (grand.items||[]).forEach(it=>{
        const a = document.createElement('a');
        a.className = 'vitem';
        a.href = `detail.html?id=${encodeURIComponent(it.id||it.name)}`;
        a.innerHTML = `
          <div class='vthumb'><img src="${safeSrc(it.thumb||'')}" alt="${it.name||''}" loading="lazy" decoding="async" /></div>
          <div class='vbody'><div class='vtitle'>${it.name}</div></div>
          <div class='vgo'>View <span>â€º</span></div>`;
        listEl.appendChild(a);
      });
      return;
    }

    // â‘¡ äºŒçº§ï¼šæœ‰ child
    if (childKey){
      const child = getChild(typeKey, childKey);

      // â‘¡-a æœ‰ subchildrenï¼šæ¸²æŸ“äºŒçº§åˆ†ç»„å¡ç‰‡ï¼Œç‚¹å‡»è¿›å…¥ä¸‰çº§
      if (child && childHasSubchildren(typeKey, childKey)){
        titleEl.textContent    = child.name;
        subtitleEl.textContent = child.note || data.subtitle || '';
        listEl.innerHTML = '';

        document.querySelector('.crumb').innerHTML =
          `<a href="index.html#categories">â† Back to Categories</a> Â· 
           <a href="?type=${encodeURIComponent(typeKey)}">${data.title}</a> Â· 
           <span>${child.name}</span>`;

        (child.subchildren||[]).forEach(sc=>{
          const scKey = sc.key || sc.id || sc.name;
          const a = document.createElement('a');
          a.className = 'vitem';
          a.href = `?type=${encodeURIComponent(typeKey)}&child=${encodeURIComponent(childKey)}&grand=${encodeURIComponent(scKey)}`;
          a.innerHTML = `
            <div class='vthumb'><img src="${safeSrc(sc.thumb||'')}" alt="${sc.name||''}" loading="lazy" decoding="async" /></div>
            <div class='vbody'>
              <div class='vtitle'>${sc.name}</div>
              <p class='vnote'>${sc.note||''}</p>
            </div>
            <div class='vgo'>Open <span>â€º</span></div>`;
          listEl.appendChild(a);
        });
        return;
      }

      // â‘¡-b æ—  subchildren ä½†æœ‰ itemsï¼ˆæ—§äºŒçº§é€»è¾‘ï¼‰
      if (child && childHasItems(typeKey, childKey)) {
        titleEl.textContent   = child.name;
        subtitleEl.textContent= child.note || data.subtitle || '';
        listEl.innerHTML = '';

        document.querySelector('.crumb').innerHTML =
          `<a href="index.html#categories">â† Back to Categories</a> Â· 
           <a href="?type=${encodeURIComponent(typeKey)}">${data.title}</a> Â· 
           <span>${child.name}</span>`;

        (child.items||[]).forEach(it=>{
          const a = document.createElement('a');
          a.className = 'vitem';
          a.href = `detail.html?id=${encodeURIComponent(it.id||it.name)}`;
          a.innerHTML = `
            <div class='vthumb'><img src="${safeSrc(it.thumb||'')}" alt="${it.name||''}" loading="lazy" decoding="async" /></div>
            <div class='vbody'><div class='vtitle'>${it.name}</div></div>
            <div class='vgo'>View <span>â€º</span></div>`;
          listEl.appendChild(a);
        });
        return;
      }
      // è‹¥ child ä¸å­˜åœ¨æˆ–æ— æ•°æ®ï¼Œå›é€€åˆ°ä¸€çº§
    }

    // â‘  ä¸€çº§ï¼šå±•ç¤ºè¯¥ç±» childrenï¼ˆå« items æˆ– subchildren çš„éƒ½èµ°å†…éƒ¨è·¯ç”±ï¼‰
    titleEl.textContent = data.title;
    subtitleEl.textContent = data.subtitle;
    document.querySelector('.crumb').innerHTML =
      `<a href="index.html#categories">â† Back to Categories</a>`;

    listEl.innerHTML = '';
    (data.children||[]).forEach(it=>{
      const childKey2 = it.key || it.id || it.name;
      const hasSub   = Array.isArray(it.subchildren) && it.subchildren.length;
      const hasItems = Array.isArray(it.items) && it.items.length;

      const a = document.createElement('a');
      a.className = 'vitem';
      if (hasSub || hasItems){
        a.href = `?type=${encodeURIComponent(typeKey)}&child=${encodeURIComponent(childKey2)}`;
      } else {
        a.href = `detail.html?id=${encodeURIComponent(it.id||it.key||it.name)}`;
      }

      a.innerHTML = `
        <div class='vthumb'>
          <img src="${safeSrc(it.thumb || '')}" alt="${it.name || ''}" loading="lazy" decoding="async" />
        </div>
        <div class='vbody'>
          <div class='vtitle'>${it.name}</div>
          <p class='vnote'>${it.note||''}</p>
        </div>
        <div class='vgo'>${(hasSub||hasItems)?'Open':'View'} <span>â€º</span></div>`;
      listEl.appendChild(a);
    });
  }

  // ========== LEFT TREEï¼ˆValves ä¹Ÿå¯å±•å¼€åˆ°ç¬¬ä¸‰çº§ï¼‰ ==========
  function buildTree(selectedType, selectedChild=null, selectedGrand=null){
    treeEl.innerHTML = '';
    keys.forEach(key=>{
      const li = document.createElement('li');

      // ä»… Flanges ä¸å±•å¼€ï¼›Valves å…è®¸å±•å¼€
      const notCollapsible = (key === 'flanges');
      li.className = 'node-wrap' + ((key===selectedType && !notCollapsible) ? ' open' : '');

      const node = document.createElement('div');
      node.className = 'node';
      node.innerHTML = `<span>${CATALOG[key].title}</span><span>${(key===selectedType && !notCollapsible)?'âˆ’':'+'}</span>`;

      // ç‚¹å‡»åˆ†ç±»æ ‡é¢˜
      node.addEventListener('click', ()=>{
        if (key !== currentType) {
          currentType  = key;
          currentChild = null;
          currentGrand = null;
          const p = new URLSearchParams(location.search);
          p.set('type', currentType);
          p.delete('child'); p.delete('grand');
          history.pushState({type: currentType}, '', `?${p.toString()}`);
          renderRight(currentType, currentChild, currentGrand);
          buildTree(currentType, currentChild, currentGrand);
        } else {
          if (!notCollapsible) {
            li.classList.toggle('open');
            node.querySelector('span:last-child').textContent =
              li.classList.contains('open') ? 'âˆ’' : '+';
          }
        }
      });
      li.appendChild(node);

      // å­é“¾æ¥ï¼šä»…å½“å…è®¸å±•å¼€æ—¶åˆ›å»º children
      if (!notCollapsible) {
        const kids = document.createElement('div');
        kids.className = 'children';
        (CATALOG[key].children||[]).forEach(child=>{
          const a = document.createElement('a');
          const childKey = child.key || child.id || child.name;
          const hasSub   = Array.isArray(child.subchildren) && child.subchildren.length;
          const hasItems = Array.isArray(child.items) && child.items.length;

          if (hasSub || hasItems){
            // äºŒçº§å…¥å£ï¼š?type=...&child=...
            a.href = `?type=${encodeURIComponent(key)}&child=${encodeURIComponent(childKey)}`;
            if (currentType===key && currentChild===childKey && !currentGrand) a.style.borderColor = 'var(--accent)';
            a.addEventListener('click', (e)=>{
              e.preventDefault();
              currentType  = key;
              currentChild = childKey;
              currentGrand = null;
              const p = new URLSearchParams();
              p.set('type', key);
              p.set('child', childKey);
              history.pushState({type:key, child:childKey}, '', `?${p.toString()}`);
              renderRight(key, childKey, null);
              buildTree(key, childKey, null);
              document.getElementById('list').scrollIntoView({behavior:'smooth'});
            });
          } else {
            // æ— äºŒçº§æ•°æ®ï¼šç»´æŒ detail.html è¡Œä¸º
            a.href = `detail.html?id=${encodeURIComponent(child.id||child.key||child.name)}`;
            a.addEventListener('click', (e)=>{
              if(key!==currentType){
                e.preventDefault();
                currentType = key;
                currentChild = null;
                currentGrand = null;
                const p = new URLSearchParams();
                p.set('type', currentType);
                history.pushState({type: currentType}, '', `?${p.toString()}`);
                renderRight(currentType, null, null);
                buildTree(currentType, null, null);
                document.getElementById('list').scrollIntoView({behavior:'smooth'});
              }
            });
          }

          a.innerHTML = `<span>${child.name}</span><span>â€º</span>`;
          kids.appendChild(a);

          // â˜… å¦‚æœè¯¥ child æœ‰ subchildren ä¸”å½“å‰é€‰ä¸­å®ƒï¼Œåˆ™å±•å¼€ç¬¬ä¸‰çº§é“¾æ¥
          if (hasSub && currentType===key && currentChild===childKey){
            const gwrap = document.createElement('div');
            gwrap.style.margin = '8px 0 0 12px';
            (child.subchildren||[]).forEach(sc=>{
              const scA = document.createElement('a');
              const scKey = sc.key || sc.id || sc.name;
              scA.href = `?type=${encodeURIComponent(key)}&child=${encodeURIComponent(childKey)}&grand=${encodeURIComponent(scKey)}`;
              if (selectedGrand===scKey) scA.style.borderColor = 'var(--accent)';
              scA.style.marginBottom = '6px';
              scA.className = 'children-link';
              scA.innerHTML = `<span>${sc.name}</span><span>â€º</span>`;
              scA.addEventListener('click', (e)=>{
                e.preventDefault();
                currentType  = key;
                currentChild = childKey;
                currentGrand = scKey;
                const p = new URLSearchParams();
                p.set('type', key);
                p.set('child', childKey);
                p.set('grand', scKey);
                history.pushState({type:key, child:childKey, grand:scKey}, '', `?${p.toString()}`);
                renderRight(key, childKey, scKey);
                buildTree(key, childKey, scKey);
                document.getElementById('list').scrollIntoView({behavior:'smooth'});
              });
              gwrap.appendChild(scA);
            });
            kids.appendChild(gwrap);
          }
        });
        li.appendChild(kids);
      }

      treeEl.appendChild(li);
    });
  }

  // ===== Init =====
  renderRight(currentType, currentChild, currentGrand);
  buildTree(currentType, currentChild, currentGrand);

  /* ---- Block navigation to detail.html (keep structure intact) ---- */
  (function blockDetailNav(){
    document.addEventListener('click', function(ev){
      const a = ev.target.closest('a');
      if(!a) return;
      const raw = a.getAttribute('href') || '';
      let hit = false;

      // å†…éƒ¨è·¯ç”±ï¼ˆå« child æˆ– grandï¼‰ä¸€å¾‹æ”¾è¡Œ
      if (/^\?[^#]*\btype=[^&]+&(child|grand)=/.test(raw)) return;

      if (raw.startsWith('detail.html')) hit = true;
      else {
        try{
          const u = new URL(a.href, location.href);
          if (u.pathname.endsWith('/detail.html') || u.pathname.endsWith('detail.html')) hit = true;
        }catch(e){}
      }
      if (hit){
        ev.preventDefault();
        a.blur();
        // TODO: å¯åœ¨æ­¤å¼¹å‡ºæŠ½å±‰/Modalï¼Œè¯»å– id æ¸²æŸ“è¯¦æƒ…
      }
    }, true);
  })();

  // Popstate
  window.onpopstate = (ev)=>{
    const sp = new URLSearchParams(location.search);
    currentType  = (ev.state && ev.state.type)  || sp.get('type')  || 'weld';
    currentChild = (ev.state && ev.state.child) || sp.get('child') || null;
    currentGrand = (ev.state && ev.state.grand) || sp.get('grand') || null;
    renderRight(currentType, currentChild, currentGrand);
    buildTree(currentType, currentChild, currentGrand);
  };
</script>
</body>
</html>
